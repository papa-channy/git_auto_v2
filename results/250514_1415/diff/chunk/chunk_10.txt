@@ -120,14 +122,18 @@ def build_context(log, timestamp: str, llm_file_cfg: dict, llm_repo_cfg: dict):
 - ì£¼ìš” íŒŒì¼ ë° í•µì‹¬ ë¡œì§
 - ì„¤ê³„ ì² í•™ì´ë‚˜ ì•„í‚¤í…ì²˜ íŠ¹ì§•
 """
-    prompt_vars["b"] = b
+
+    prompt_vars["b"] = {
+        "text": b,
+        "model": llm_repo_cfg["model"][0],
+        "purpose": "global_context"
+    }
 
     try:
         final_summary = call_llm(b, llm_repo_cfg)
         Path(paths["context_summary"]).write_text(final_summary.strip(), encoding="utf-8")
         log("âœ… ì „ì²´ ë ˆí¬ ìš”ì•½ ì™„ë£Œ")
         return final_summary.strip(), prompt_vars
-
     except Exception as e:
         log(f"âŒ ì „ì²´ ë ˆí¬ ìš”ì•½ ì‹¤íŒ¨: {e}")
         return "", prompt_vars
diff --git a/scripts/cost_calc.py b/scripts/cost_calc.py
index 100da6e..aee02ec 100644
--- a/scripts/cost_calc.py
+++ b/scripts/cost_calc.py
@@ -3,9 +3,9 @@ import math
 import pandas as pd
 import tiktoken
 import requests
+from datetime import datetime, timedelta
 from bs4 import BeautifulSoup
 from pathlib import Path
-from datetime import datetime
 from openpyxl import Workbook, load_workbook
 from openpyxl.utils.dataframe import dataframe_to_rows
 from utils.path import get_cost_log_path, get_result_paths
@@ -14,26 +14,34 @@ from utils.path import get_cost_log_path, get_result_paths
 # í™˜ìœ¨ ì²˜ë¦¬ (í•˜ë£¨ 1íšŒë§Œ í¬ë¡¤ë§)
 # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 def get_usd_exchange_rate(log) -> float:
-    ex_file = Path("cost/ex_rate.txt")
-    today = datetime.now().strftime("%Y-%m-%d")
-
-    if ex_file.exists():
-        last_modified = datetime.fromtimestamp(ex_file.stat().st_mtime).strftime("%Y-%m-%d")
-        if last_modified == today:
-            log("ğŸ’± í™˜ìœ¨ ìºì‹œ ì‚¬ìš©")
-            return float(ex_file.read_text().strip())
+    ex_path = Path("cost/ex_rate.txt")
+    fallback = 1400.0
 
     try:
-        res = requests.get("https://finance.naver.com/marketindex/")
-        soup = BeautifulSoup(res.text, "html.parser")
-        price = soup.select_one("div.head_info > span.value").text
-        rate = float(price.replace(",", ""))
-        ex_file.write_text(str(rate))
-        log(f"ğŸ“ˆ ì‹¤ì‹œê°„ í™˜ìœ¨ ì—…ë°ì´íŠ¸: {rate} ì›/USD")
+        # ğŸ“Œ íŒŒì¼ì´ ìˆê³  24ì‹œê°„ ì´ë‚´ë©´ ìºì‹œ ì‚¬ìš©
+        if ex_path.exists():
+            last_modified = datetime.fromtimestamp(ex_path.stat().st_mtime)
+            if datetime.now() - last_modified < timedelta(hours=24):
+                content = ex_path.read_text().strip()
+                if content:
+                    return float(content)
+
+        # ğŸ“¡ ì›¹ í¬ë¡¤ë§ ì‹œë„
+        log("ğŸŒ í™˜ìœ¨ ì •ë³´ ìƒˆë¡œ ìš”ì²­ ì¤‘...")
+        url = "https://finance.naver.com/marketindex/"
+        html = requests.get(url, timeout=5).text
+        soup = BeautifulSoup(html, "html.parser")
+        rate_text = soup.select_one("div.head_info > span.value").text
+        rate = float(rate_text.replace(",", ""))
+
+        # ğŸ’¾ ìºì‹±
+        ex_path.parent.mkdir(parents=True, exist_ok=True)
+        ex_path.write_text(str(rate), encoding="utf-8")
         return rate
-    except:
-        log("âš ï¸ í™˜ìœ¨ í¬ë¡¤ë§ ì‹¤íŒ¨, ì´ì „ í™˜ìœ¨ ë˜ëŠ” ê¸°ë³¸ê°’ ì‚¬ìš©")
-        return float(ex_file.read_text().strip()) if ex_file.exists() else 1400.0
+
+    except Exception as e:
+        log(f"âš ï¸ í™˜ìœ¨ ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨: {e} â†’ fallback {fallback}")
+        return fallback
 
 # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 # í† í° ê³„ì‚°ê¸°
diff --git a/scripts/run_all.py b/scripts/run_all.py
deleted file mode 100644
index 2e93557..0000000
--- a/scripts/run_all.py
+++ /dev/null